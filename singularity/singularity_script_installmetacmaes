Bootstrap: localimage
From: planar_metacmaes.sif

%post
 export HOME_CONTAINER=/singularity_home/ 
 export BOTS_DIR=$HOME_CONTAINER/Resibots 
 export SFERES_DIR=$HOME_CONTAINER/sferes2
 export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/lib/x86_64-linux-gnu:/lib:/usr/lib:/usr/local/lib:/usr/lib/x86_64-linux-gnu:$BOTS_DIR/lib

cp -rv $HOME_CONTAINER/planar_metacmaes/meta-cmaes/ ${BOTS_DIR}/include
cp -rv $HOME_CONTAINER/planar_metacmaes/planar_cmaes/ ${SFERES_DIR}/exp

#build meta

export BUILD_TYPE=damage_meta
cd $HOME_CONTAINER/planar_metacmaes/planar_dart/
./waf distclean
./waf configure --prefix=$BOTS_DIR
./waf
./waf install

cd $SFERES_DIR
./waf distclean
./waf configure  --exp planar_cmaes --dart ${BOTS_DIR}
./waf  --exp planar_cmaes  --dart ${BOTS_DIR}
 
 # build random
export BUILD_TYPE=random
cd $HOME_CONTAINER/planar_metacmaes/planar_dart/
./waf configure --prefix=$BOTS_DIR 
./waf
./waf install
cd $SFERES_DIR
./waf configure --exp planar_cmaes --dart ${BOTS_DIR}
./waf  --exp planar_cmaes  --dart ${BOTS_DIR}

  # build random
export BUILD_TYPE=control
cd $HOME_CONTAINER/planar_metacmaes/planar_dart/
./waf configure --prefix=$BOTS_DIR
./waf
./waf install
cd $SFERES_DIR
./waf configure --exp planar_cmaes --dart ${BOTS_DIR}
./waf --exp planar_cmaes --dart ${BOTS_DIR}
